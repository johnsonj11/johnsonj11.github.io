<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 11 Computing using loops | MAS2007 - Mathematics and Statistics in Action</title>
  <meta name="description" content="MAS2007" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 11 Computing using loops | MAS2007 - Mathematics and Statistics in Action" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="MAS2007" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 11 Computing using loops | MAS2007 - Mathematics and Statistics in Action" />
  
  <meta name="twitter:description" content="MAS2007" />
  

<meta name="author" content="" />


<meta name="date" content="2025-01-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="maps-with-leaflet.html"/>
<link rel="next" href="relationships-in-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MAS2007</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About these notes</a></li>
<li class="chapter" data-level="1" data-path="set-up-your-r-environment.html"><a href="set-up-your-r-environment.html"><i class="fa fa-check"></i><b>1</b> Set up your R environment</a></li>
<li class="chapter" data-level="2" data-path="project-overview.html"><a href="project-overview.html"><i class="fa fa-check"></i><b>2</b> Project overview</a></li>
<li class="part"><span><b>I Data Processing</b></span></li>
<li class="chapter" data-level="3" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>3</b> Importing data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="importing-data.html"><a href="importing-data.html#importing-a-.csv-file"><i class="fa fa-check"></i><b>3.1</b> Importing a .csv file</a></li>
<li class="chapter" data-level="3.2" data-path="importing-data.html"><a href="importing-data.html#importing-excel-.xlsx-files"><i class="fa fa-check"></i><b>3.2</b> Importing Excel .xlsx files</a></li>
<li class="chapter" data-level="3.3" data-path="importing-data.html"><a href="importing-data.html#importing-a-plain-text-file"><i class="fa fa-check"></i><b>3.3</b> Importing a plain text file</a></li>
<li class="chapter" data-level="3.4" data-path="importing-data.html"><a href="importing-data.html#importing-online-data"><i class="fa fa-check"></i><b>3.4</b> Importing online data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>4</b> Strings</a>
<ul>
<li class="chapter" data-level="4.1" data-path="strings.html"><a href="strings.html#example-fictitous-exam-mark-data"><i class="fa fa-check"></i><b>4.1</b> Example: (fictitous) exam mark data</a></li>
<li class="chapter" data-level="4.2" data-path="strings.html"><a href="strings.html#importing-text-data-with-read_lines"><i class="fa fa-check"></i><b>4.2</b> Importing text data with <code>read_lines()</code></a></li>
<li class="chapter" data-level="4.3" data-path="strings.html"><a href="strings.html#finding-and-replacing-characters-in-strings"><i class="fa fa-check"></i><b>4.3</b> Finding (and replacing) characters in strings</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="strings.html"><a href="strings.html#finding-text-with-str_which"><i class="fa fa-check"></i><b>4.3.1</b> Finding text with <code>str_which()</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="strings.html"><a href="strings.html#escape-characters-and-regular-expressions"><i class="fa fa-check"></i><b>4.3.2</b> Escape characters and regular expressions</a></li>
<li class="chapter" data-level="4.3.3" data-path="strings.html"><a href="strings.html#replacing-or-removing-text"><i class="fa fa-check"></i><b>4.3.3</b> Replacing or removing text</a></li>
<li class="chapter" data-level="4.3.4" data-path="strings.html"><a href="strings.html#removing-white-space-at-startend-of-strings"><i class="fa fa-check"></i><b>4.3.4</b> Removing white space at start/end of strings</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="strings.html"><a href="strings.html#subsetting-strings"><i class="fa fa-check"></i><b>4.4</b> Subsetting strings</a></li>
<li class="chapter" data-level="4.5" data-path="strings.html"><a href="strings.html#making-a-data-frame"><i class="fa fa-check"></i><b>4.5</b> Making a data frame</a></li>
<li class="chapter" data-level="4.6" data-path="strings.html"><a href="strings.html#exercise"><i class="fa fa-check"></i><b>4.6</b> Exercise</a></li>
<li class="chapter" data-level="4.7" data-path="strings.html"><a href="strings.html#further-reading"><i class="fa fa-check"></i><b>4.7</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulating-data-frames---recap.html"><a href="manipulating-data-frames---recap.html"><i class="fa fa-check"></i><b>5</b> Manipulating data frames - recap</a>
<ul>
<li class="chapter" data-level="5.1" data-path="manipulating-data-frames---recap.html"><a href="manipulating-data-frames---recap.html#chaining-commands-together-with-the-pipe-operator"><i class="fa fa-check"></i><b>5.1</b> Chaining commands together with the pipe operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="5.2" data-path="manipulating-data-frames---recap.html"><a href="manipulating-data-frames---recap.html#ordering-the-rows-by-a-variable-with-the-arrange-command"><i class="fa fa-check"></i><b>5.2</b> Ordering the rows by a variable with the <code>arrange()</code> command</a></li>
<li class="chapter" data-level="5.3" data-path="manipulating-data-frames---recap.html"><a href="manipulating-data-frames---recap.html#selecting-rows-with-the-filter-command"><i class="fa fa-check"></i><b>5.3</b> Selecting rows with the <code>filter()</code> command</a></li>
<li class="chapter" data-level="5.4" data-path="manipulating-data-frames---recap.html"><a href="manipulating-data-frames---recap.html#viewing-and-extracting-data-from-a-column"><i class="fa fa-check"></i><b>5.4</b> Viewing and extracting data from a column</a></li>
<li class="chapter" data-level="5.5" data-path="manipulating-data-frames---recap.html"><a href="manipulating-data-frames---recap.html#creating-new-columns-in-a-data-frame-with-the-mutate-command"><i class="fa fa-check"></i><b>5.5</b> Creating new columns in a data frame with the <code>mutate()</code> command</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="summary-statistics---recap.html"><a href="summary-statistics---recap.html"><i class="fa fa-check"></i><b>6</b> Summary statistics - recap</a>
<ul>
<li class="chapter" data-level="6.1" data-path="summary-statistics---recap.html"><a href="summary-statistics---recap.html#calculating-summary-statistics-with-the-summary-command"><i class="fa fa-check"></i><b>6.1</b> Calculating summary statistics with the <code>summary()</code> command</a></li>
<li class="chapter" data-level="6.2" data-path="summary-statistics---recap.html"><a href="summary-statistics---recap.html#calculating-individual-summary-statistics"><i class="fa fa-check"></i><b>6.2</b> Calculating individual summary statistics</a></li>
<li class="chapter" data-level="6.3" data-path="summary-statistics---recap.html"><a href="summary-statistics---recap.html#computing-summaries-per-group"><i class="fa fa-check"></i><b>6.3</b> Computing summaries per group</a></li>
<li class="chapter" data-level="6.4" data-path="summary-statistics---recap.html"><a href="summary-statistics---recap.html#exercise-1"><i class="fa fa-check"></i><b>6.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="missing-data.html"><a href="missing-data.html"><i class="fa fa-check"></i><b>7</b> Missing data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="missing-data.html"><a href="missing-data.html#na"><i class="fa fa-check"></i><b>7.1</b> <code>NA</code></a></li>
<li class="chapter" data-level="7.2" data-path="missing-data.html"><a href="missing-data.html#functions-and-na"><i class="fa fa-check"></i><b>7.2</b> Functions and <code>NA</code></a></li>
</ul></li>
<li class="part"><span><b>II Plotting data</b></span></li>
<li class="chapter" data-level="8" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html"><i class="fa fa-check"></i><b>8</b> Making plots with <code>ggplot2</code> - recap</a>
<ul>
<li class="chapter" data-level="8.1" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#the-general-syntax"><i class="fa fa-check"></i><b>8.1</b> The general syntax</a></li>
<li class="chapter" data-level="8.2" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#scatter-plots"><i class="fa fa-check"></i><b>8.2</b> Scatter plots</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#annotating-a-scatter-plot"><i class="fa fa-check"></i><b>8.2.1</b> Annotating a scatter plot</a></li>
<li class="chapter" data-level="8.2.2" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#adding-a-trend"><i class="fa fa-check"></i><b>8.2.2</b> Adding a trend</a></li>
<li class="chapter" data-level="8.2.3" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#representing-more-than-two-variables-on-a-scatter-plot"><i class="fa fa-check"></i><b>8.2.3</b> Representing more than two variables on a scatter plot</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#histograms"><i class="fa fa-check"></i><b>8.3</b> Histograms</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#customising-a-histogram-plot-in-r"><i class="fa fa-check"></i><b>8.3.1</b> Customising a histogram plot in R</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#box-plots"><i class="fa fa-check"></i><b>8.4</b> Box plots</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#adding-the-observations-to-a-box-plot"><i class="fa fa-check"></i><b>8.4.1</b> Adding the observations to a box plot</a></li>
<li class="chapter" data-level="8.4.2" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#violin-plots"><i class="fa fa-check"></i><b>8.4.2</b> Violin plots</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#global-aesthetics"><i class="fa fa-check"></i><b>8.5</b> ‘Global’ aesthetics</a></li>
<li class="chapter" data-level="8.6" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#facets"><i class="fa fa-check"></i><b>8.6</b> Facets</a></li>
<li class="chapter" data-level="8.7" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#exBrexitPlots"><i class="fa fa-check"></i><b>8.7</b> Exercises</a></li>
<li class="chapter" data-level="8.8" data-path="making-plots-with-ggplot2---recap.html"><a href="making-plots-with-ggplot2---recap.html#further-reading-1"><i class="fa fa-check"></i><b>8.8</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html"><i class="fa fa-check"></i><b>9</b> Presentation of plots</a>
<ul>
<li class="chapter" data-level="9.1" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#the-basics"><i class="fa fa-check"></i><b>9.1</b> The basics</a></li>
<li class="chapter" data-level="9.2" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#the-caption-test"><i class="fa fa-check"></i><b>9.2</b> The caption test</a></li>
<li class="chapter" data-level="9.3" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#caption-or-title"><i class="fa fa-check"></i><b>9.3</b> Caption or title?</a></li>
<li class="chapter" data-level="9.4" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#customising-the-appearance-of-a-plot"><i class="fa fa-check"></i><b>9.4</b> Customising the appearance of a plot</a></li>
<li class="chapter" data-level="9.5" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#refining-a-plot-an-example"><i class="fa fa-check"></i><b>9.5</b> Refining a plot: an example</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#the-data-to-plot"><i class="fa fa-check"></i><b>9.5.1</b> The data to plot</a></li>
<li class="chapter" data-level="9.5.2" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#a-first-attempt-four-histograms"><i class="fa fa-check"></i><b>9.5.2</b> A first attempt: four histograms</a></li>
<li class="chapter" data-level="9.5.3" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#using-a-box-plot"><i class="fa fa-check"></i><b>9.5.3</b> Using a box plot</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#exercises"><i class="fa fa-check"></i><b>9.6</b> Exercises</a></li>
<li class="chapter" data-level="9.7" data-path="presentation-of-plots.html"><a href="presentation-of-plots.html#data-sources"><i class="fa fa-check"></i><b>9.7</b> Data sources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="maps-with-leaflet.html"><a href="maps-with-leaflet.html"><i class="fa fa-check"></i><b>10</b> Maps with <code>leaflet</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="maps-with-leaflet.html"><a href="maps-with-leaflet.html#a-basic-map"><i class="fa fa-check"></i><b>10.1</b> A basic map</a></li>
<li class="chapter" data-level="10.2" data-path="maps-with-leaflet.html"><a href="maps-with-leaflet.html#indicating-points-on-a-map"><i class="fa fa-check"></i><b>10.2</b> Indicating points on a map</a></li>
<li class="chapter" data-level="10.3" data-path="maps-with-leaflet.html"><a href="maps-with-leaflet.html#exercise-2"><i class="fa fa-check"></i><b>10.3</b> Exercise</a></li>
<li class="chapter" data-level="10.4" data-path="maps-with-leaflet.html"><a href="maps-with-leaflet.html#further-reading-2"><i class="fa fa-check"></i><b>10.4</b> Further reading</a></li>
</ul></li>
<li class="part"><span><b>III Statistical Inference</b></span></li>
<li class="chapter" data-level="11" data-path="computing-using-loops.html"><a href="computing-using-loops.html"><i class="fa fa-check"></i><b>11</b> Computing using loops</a>
<ul>
<li class="chapter" data-level="11.1" data-path="computing-using-loops.html"><a href="computing-using-loops.html#repeating-a-process-with-a-for-loop"><i class="fa fa-check"></i><b>11.1</b> Repeating a process with a <code>for</code> loop</a></li>
<li class="chapter" data-level="11.2" data-path="computing-using-loops.html"><a href="computing-using-loops.html#example-cleaning-two-text-files"><i class="fa fa-check"></i><b>11.2</b> Example: cleaning two text files</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="computing-using-loops.html"><a href="computing-using-loops.html#the-core-code-block"><i class="fa fa-check"></i><b>11.2.1</b> The core code block</a></li>
<li class="chapter" data-level="11.2.2" data-path="computing-using-loops.html"><a href="computing-using-loops.html#identify-the-variables-we-need-to-specify"><i class="fa fa-check"></i><b>11.2.2</b> Identify the variables we need to specify</a></li>
<li class="chapter" data-level="11.2.3" data-path="computing-using-loops.html"><a href="computing-using-loops.html#create-an-empty-list-to-store-the-results"><i class="fa fa-check"></i><b>11.2.3</b> Create an empty list to store the results</a></li>
<li class="chapter" data-level="11.2.4" data-path="computing-using-loops.html"><a href="computing-using-loops.html#use-a-for-loop-to-run-the-code-block-multiple-times"><i class="fa fa-check"></i><b>11.2.4</b> Use a for loop to run the code block multiple times</a></li>
<li class="chapter" data-level="11.2.5" data-path="computing-using-loops.html"><a href="computing-using-loops.html#convert-the-list-to-a-data-frame"><i class="fa fa-check"></i><b>11.2.5</b> Convert the list to a data frame</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="computing-using-loops.html"><a href="computing-using-loops.html#example-averaging-over-groups"><i class="fa fa-check"></i><b>11.3</b> Example: averaging over groups</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="computing-using-loops.html"><a href="computing-using-loops.html#the-core-code-block-1"><i class="fa fa-check"></i><b>11.3.1</b> The core code block</a></li>
<li class="chapter" data-level="11.3.2" data-path="computing-using-loops.html"><a href="computing-using-loops.html#identify-the-variables-we-need-to-specify-1"><i class="fa fa-check"></i><b>11.3.2</b> Identify the variables we need to specify</a></li>
<li class="chapter" data-level="11.3.3" data-path="computing-using-loops.html"><a href="computing-using-loops.html#create-an-empty-vector-to-store-the-results"><i class="fa fa-check"></i><b>11.3.3</b> Create an empty vector to store the results</a></li>
<li class="chapter" data-level="11.3.4" data-path="computing-using-loops.html"><a href="computing-using-loops.html#use-a-for-loop-to-run-the-code-block-multiple-times-1"><i class="fa fa-check"></i><b>11.3.4</b> Use a <code>for</code> loop to run the code block multiple times</a></li>
<li class="chapter" data-level="11.3.5" data-path="computing-using-loops.html"><a href="computing-using-loops.html#convert-the-vector-to-a-data-frame"><i class="fa fa-check"></i><b>11.3.5</b> Convert the vector to a data frame</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="computing-using-loops.html"><a href="computing-using-loops.html#exercise-3"><i class="fa fa-check"></i><b>11.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="relationships-in-data.html"><a href="relationships-in-data.html"><i class="fa fa-check"></i><b>12</b> Relationships in data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="relationships-in-data.html"><a href="relationships-in-data.html#covariance-and-correlation---recap"><i class="fa fa-check"></i><b>12.1</b> Covariance and correlation - recap</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="relationships-in-data.html"><a href="relationships-in-data.html#covariance"><i class="fa fa-check"></i><b>12.1.1</b> Covariance</a></li>
<li class="chapter" data-level="12.1.2" data-path="relationships-in-data.html"><a href="relationships-in-data.html#pearsons-correlation-coefficient"><i class="fa fa-check"></i><b>12.1.2</b> Pearson’s correlation coefficient</a></li>
<li class="chapter" data-level="12.1.3" data-path="relationships-in-data.html"><a href="relationships-in-data.html#spearmans-correlation-coefficient"><i class="fa fa-check"></i><b>12.1.3</b> Spearman’s correlation coefficient</a></li>
<li class="chapter" data-level="12.1.4" data-path="relationships-in-data.html"><a href="relationships-in-data.html#correlations-for-the-trees-data-set"><i class="fa fa-check"></i><b>12.1.4</b> Correlations for the <code>trees</code> data set</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="relationships-in-data.html"><a href="relationships-in-data.html#simple-linear-regression"><i class="fa fa-check"></i><b>12.2</b> Simple linear regression</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="relationships-in-data.html"><a href="relationships-in-data.html#fitting-the-simple-linear-regression-model-in-r"><i class="fa fa-check"></i><b>12.2.1</b> Fitting the simple linear regression model in R</a></li>
<li class="chapter" data-level="12.2.2" data-path="relationships-in-data.html"><a href="relationships-in-data.html#prediction-from-the-fitted-model"><i class="fa fa-check"></i><b>12.2.2</b> Prediction from the fitted model</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="relationships-in-data.html"><a href="relationships-in-data.html#exploring-variation-over-time"><i class="fa fa-check"></i><b>12.3</b> Exploring variation over time</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="relationships-in-data.html"><a href="relationships-in-data.html#trends"><i class="fa fa-check"></i><b>12.3.1</b> Trends</a></li>
<li class="chapter" data-level="12.3.2" data-path="relationships-in-data.html"><a href="relationships-in-data.html#seasonality"><i class="fa fa-check"></i><b>12.3.2</b> Seasonality</a></li>
<li class="chapter" data-level="12.3.3" data-path="relationships-in-data.html"><a href="relationships-in-data.html#temporal-dependence"><i class="fa fa-check"></i><b>12.3.3</b> Temporal dependence</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="relationships-in-data.html"><a href="relationships-in-data.html#exercise-4"><i class="fa fa-check"></i><b>12.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="imputing-missing-data.html"><a href="imputing-missing-data.html"><i class="fa fa-check"></i><b>13</b> Imputing missing data</a>
<ul>
<li class="chapter" data-level="13.1" data-path="imputing-missing-data.html"><a href="imputing-missing-data.html#visualising-missing-data"><i class="fa fa-check"></i><b>13.1</b> Visualising missing data</a></li>
<li class="chapter" data-level="13.2" data-path="imputing-missing-data.html"><a href="imputing-missing-data.html#exercise-5"><i class="fa fa-check"></i><b>13.2</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MAS2007 - Mathematics and Statistics in Action</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="computing-using-loops" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Section 11</span> Computing using loops<a href="computing-using-loops.html#computing-using-loops" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Sometimes we may be working with data where we require to repeat a block of code multiple times. For example, reading in data sets spread across multiple files where the structure of the data within each file is the same, or, performing a set of calculations for different groupings of the data. It can be tempting to copy and paste a block of R code, once for each occurrence, editing each block as necessary. Try to avoid this if you can! Your code may get messy/hard to read if you have lots of occurrences, and it may lead to bugs if you don’t edit each block correctly.</p>
<div id="repeating-a-process-with-a-for-loop" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Repeating a process with a <code>for</code> loop<a href="computing-using-loops.html#repeating-a-process-with-a-for-loop" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are different ways we might get R to run the same block of code multiple times (with small changes each time). It may be a good idea to create your own function, but we’ll consider a simpler solution here, which is to put code inside a <code>for</code> loop. (There are more efficient methods, but <code>for</code> loops are easy to write and read, and will be sufficient for this module.)</p>
<p>A <code>for</code> loop has the basic syntax</p>
<pre><code>for(i in 1:n){
 
}</code></pre>
<ul>
<li>Everything inside the curly brackets will be carried out <code>n</code> times;</li>
<li>any instance of <code>i</code> will be replaced by <code>1</code>, then <code>2</code>, <code>3</code>,…,<code>n</code>. If, for example, there is an <code>x[i]</code> inside the curly brackets, this code will be run first using <code>x[1]</code>, then using <code>x[2]</code> and so on.</li>
</ul>
</div>
<div id="example-cleaning-two-text-files" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Example: cleaning two text files<a href="computing-using-loops.html#example-cleaning-two-text-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As an example, we’ll use the fictitious student data, but now suppose there are two data files: <code>stat101.txt</code> and <code>stat102.txt</code>. We suppose each data set needs cleaning, and then we’d like to combine the two data frames.</p>
<div id="the-core-code-block" class="section level3 hasAnchor" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> The core code block<a href="computing-using-loops.html#the-core-code-block" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have a ‘core’ block of code that we want to use multiple times, making small changes each time. The code to get a single data file into a data frame was as follows. (We’ll add an extra <code>mutate()</code> command to store the module code.)</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="computing-using-loops.html#cb125-1" tabindex="-1"></a>examTextRaw <span class="ot">&lt;-</span> <span class="fu">read_lines</span>(<span class="st">&quot;data/stat101.txt&quot;</span>)</span>
<span id="cb125-2"><a href="computing-using-loops.html#cb125-2" tabindex="-1"></a></span>
<span id="cb125-3"><a href="computing-using-loops.html#cb125-3" tabindex="-1"></a>examTextClean <span class="ot">&lt;-</span> examTextRaw <span class="sc">%&gt;%</span></span>
<span id="cb125-4"><a href="computing-using-loops.html#cb125-4" tabindex="-1"></a>  <span class="fu">str_remove_all</span>(<span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">*&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb125-5"><a href="computing-using-loops.html#cb125-5" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="at">pattern =</span> <span class="st">&quot;--&quot;</span>,</span>
<span id="cb125-6"><a href="computing-using-loops.html#cb125-6" tabindex="-1"></a>                  <span class="at">replacement =</span> <span class="st">&quot;NA&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb125-7"><a href="computing-using-loops.html#cb125-7" tabindex="-1"></a>  <span class="fu">str_trim</span>()</span>
<span id="cb125-8"><a href="computing-using-loops.html#cb125-8" tabindex="-1"></a></span>
<span id="cb125-9"><a href="computing-using-loops.html#cb125-9" tabindex="-1"></a>header <span class="ot">&lt;-</span> <span class="fu">str_which</span>(examTextClean, <span class="at">pattern =</span> <span class="st">&quot;student&quot;</span>)</span>
<span id="cb125-10"><a href="computing-using-loops.html#cb125-10" tabindex="-1"></a>endLine <span class="ot">&lt;-</span> <span class="fu">str_which</span>(examTextClean, <span class="at">pattern =</span> <span class="st">&quot;denotes&quot;</span>)</span>
<span id="cb125-11"><a href="computing-using-loops.html#cb125-11" tabindex="-1"></a></span>
<span id="cb125-12"><a href="computing-using-loops.html#cb125-12" tabindex="-1"></a><span class="fu">read_table</span>(examTextClean[header<span class="sc">:</span>(endLine <span class="sc">-</span> <span class="dv">1</span>)]) <span class="sc">%&gt;%</span></span>
<span id="cb125-13"><a href="computing-using-loops.html#cb125-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">module =</span> <span class="st">&quot;stat101&quot;</span>)</span></code></pre></div>
<p>We want to run this block twice, once for the file <code>stat101.txt</code> and once for <code>stat102.txt</code>.</p>
</div>
<div id="identify-the-variables-we-need-to-specify" class="section level3 hasAnchor" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Identify the variables we need to specify<a href="computing-using-loops.html#identify-the-variables-we-need-to-specify" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The code block above needs to run twice, once using the file name <code>stat101.txt</code>, and once using the name <code>stat102.txt</code>. We will have to specify these in advance. We can actually just specify module codes:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="computing-using-loops.html#cb126-1" tabindex="-1"></a>modules <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;stat101&quot;</span>, <span class="st">&quot;stat102&quot;</span>)</span></code></pre></div>
<p>and then construct the file paths using <code>paste0()</code>:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="computing-using-loops.html#cb127-1" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;data/&quot;</span>, modules, <span class="st">&quot;.txt&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;data/stat101.txt&quot; &quot;data/stat102.txt&quot;</code></pre>
</div>
<div id="create-an-empty-list-to-store-the-results" class="section level3 hasAnchor" number="11.2.3">
<h3><span class="header-section-number">11.2.3</span> Create an empty list to store the results<a href="computing-using-loops.html#create-an-empty-list-to-store-the-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lists are useful here, as an element of a list can be any type of object. We make an empty one as follows:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="computing-using-loops.html#cb129-1" tabindex="-1"></a>moduleResults <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(modules))</span>
<span id="cb129-2"><a href="computing-using-loops.html#cb129-2" tabindex="-1"></a>moduleResults</span></code></pre></div>
<pre><code>## [[1]]
## NULL
## 
## [[2]]
## NULL</code></pre>
<p>(We could have just specified <code>length = 2</code>, but try to avoid specifying numerical values like this if they may change at some point, e.g. if another module was to be added.)</p>
</div>
<div id="use-a-for-loop-to-run-the-code-block-multiple-times" class="section level3 hasAnchor" number="11.2.4">
<h3><span class="header-section-number">11.2.4</span> Use a for loop to run the code block multiple times<a href="computing-using-loops.html#use-a-for-loop-to-run-the-code-block-multiple-times" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The code to be repeated goes inside a for loop, with one element of the list <code>moduleResults</code> filled each time. (We’ll repeat the commands to set up the variables at the start.)</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="computing-using-loops.html#cb131-1" tabindex="-1"></a>modules <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;stat101&quot;</span>, <span class="st">&quot;stat102&quot;</span>)</span>
<span id="cb131-2"><a href="computing-using-loops.html#cb131-2" tabindex="-1"></a>filePaths <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;data/&quot;</span>, modules, <span class="st">&quot;.txt&quot;</span>)</span>
<span id="cb131-3"><a href="computing-using-loops.html#cb131-3" tabindex="-1"></a>moduleResults <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(modules))</span>
<span id="cb131-4"><a href="computing-using-loops.html#cb131-4" tabindex="-1"></a></span>
<span id="cb131-5"><a href="computing-using-loops.html#cb131-5" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(modules)){</span>
<span id="cb131-6"><a href="computing-using-loops.html#cb131-6" tabindex="-1"></a>  examTextRaw <span class="ot">&lt;-</span> <span class="fu">read_lines</span>(filePaths[i])</span>
<span id="cb131-7"><a href="computing-using-loops.html#cb131-7" tabindex="-1"></a>  </span>
<span id="cb131-8"><a href="computing-using-loops.html#cb131-8" tabindex="-1"></a>  examTextClean <span class="ot">&lt;-</span> examTextRaw <span class="sc">%&gt;%</span></span>
<span id="cb131-9"><a href="computing-using-loops.html#cb131-9" tabindex="-1"></a>    <span class="fu">str_remove_all</span>(<span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">*&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-10"><a href="computing-using-loops.html#cb131-10" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="at">pattern =</span> <span class="st">&quot;--&quot;</span>,</span>
<span id="cb131-11"><a href="computing-using-loops.html#cb131-11" tabindex="-1"></a>                    <span class="at">replacement =</span> <span class="st">&quot;NA&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-12"><a href="computing-using-loops.html#cb131-12" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb131-13"><a href="computing-using-loops.html#cb131-13" tabindex="-1"></a>  </span>
<span id="cb131-14"><a href="computing-using-loops.html#cb131-14" tabindex="-1"></a>  header <span class="ot">&lt;-</span> <span class="fu">str_which</span>(examTextClean, <span class="at">pattern =</span> <span class="st">&quot;student&quot;</span>)</span>
<span id="cb131-15"><a href="computing-using-loops.html#cb131-15" tabindex="-1"></a>  endLine <span class="ot">&lt;-</span> <span class="fu">str_which</span>(examTextClean, <span class="at">pattern =</span> <span class="st">&quot;denotes&quot;</span>)</span>
<span id="cb131-16"><a href="computing-using-loops.html#cb131-16" tabindex="-1"></a>  </span>
<span id="cb131-17"><a href="computing-using-loops.html#cb131-17" tabindex="-1"></a>  moduleResults[[i]] <span class="ot">&lt;-</span> </span>
<span id="cb131-18"><a href="computing-using-loops.html#cb131-18" tabindex="-1"></a>    <span class="fu">read_table</span>(examTextClean[header<span class="sc">:</span>(endLine <span class="sc">-</span> <span class="dv">1</span>)]) <span class="sc">%&gt;%</span></span>
<span id="cb131-19"><a href="computing-using-loops.html#cb131-19" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">module =</span> modules[i])</span>
<span id="cb131-20"><a href="computing-using-loops.html#cb131-20" tabindex="-1"></a>}</span>
<span id="cb131-21"><a href="computing-using-loops.html#cb131-21" tabindex="-1"></a><span class="fu">rm</span>(i, examTextRaw, examTextClean, header, endLine)</span></code></pre></div>
<div class="rmdnote">
<p>
The remove command <code>rm()</code> at the end just tidies up the
background R environment. [When a <code>for</code> loop is run outside
of a function, anything defined in the loop will be retained in the
background R environment, evaluated at the values used in the final
iteration of the loop.]
</p>
</div>
</div>
<div id="convert-the-list-to-a-data-frame" class="section level3 hasAnchor" number="11.2.5">
<h3><span class="header-section-number">11.2.5</span> Convert the list to a data frame<a href="computing-using-loops.html#convert-the-list-to-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As each data frame in the list has the same column headings, we can convert the list to a data frame as follows:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="computing-using-loops.html#cb132-1" tabindex="-1"></a><span class="fu">do.call</span>(rbind.data.frame, moduleResults)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 4
##   student   cwk  exam module 
##     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  
## 1   12015    55    62 stat101
## 2   12468    78    84 stat101
## 3   11560    55    40 stat101
## 4   12589    62    NA stat101
## 5   12015    61    69 stat102
## 6   12468    81    78 stat102
## 7   11579    51    40 stat102</code></pre>
</div>
</div>
<div id="example-averaging-over-groups" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> Example: averaging over groups<a href="computing-using-loops.html#example-averaging-over-groups" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here, we will continue to use the <code>maths</code> data example, and use a <code>for</code> loop to compute the average (mean) test score across countries for each continent. Let’s read in the data:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="computing-using-loops.html#cb134-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb134-2"><a href="computing-using-loops.html#cb134-2" tabindex="-1"></a>maths <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://oakleyj.github.io/exampledata/maths.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb134-3"><a href="computing-using-loops.html#cb134-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">wealthiest =</span> gdp <span class="sc">&gt;</span> <span class="dv">17000</span>)</span></code></pre></div>
<div id="the-core-code-block-1" class="section level3 hasAnchor" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> The core code block<a href="computing-using-loops.html#the-core-code-block-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To compute the mean test score for a particular continent, e.g. Europe, we must first filter the data to extract the data of all countries in Europe, and then compute our mean statistic for that data.
Hence, our ‘core’ block of code that we want to use multiple times, making small changes each time, is as follows:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="computing-using-loops.html#cb135-1" tabindex="-1"></a>Cont_data <span class="ot">&lt;-</span> maths <span class="sc">%&gt;%</span> <span class="fu">filter</span>(continent<span class="sc">==</span><span class="st">&quot;Europe&quot;</span>)</span>
<span id="cb135-2"><a href="computing-using-loops.html#cb135-2" tabindex="-1"></a><span class="fu">mean</span>(Cont_data<span class="sc">$</span>score)</span></code></pre></div>
</div>
<div id="identify-the-variables-we-need-to-specify-1" class="section level3 hasAnchor" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Identify the variables we need to specify<a href="computing-using-loops.html#identify-the-variables-we-need-to-specify-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The code block above needs to run for each unique element of the continent column in the <code>maths</code> data frame: Africa, Asia, Europe, North America, Oceanea and South America. We must specify these in advance:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="computing-using-loops.html#cb136-1" tabindex="-1"></a>Continents <span class="ot">&lt;-</span> <span class="fu">unique</span>(maths<span class="sc">$</span>continent) <span class="sc">%&gt;%</span> <span class="fu">sort</span>()</span>
<span id="cb136-2"><a href="computing-using-loops.html#cb136-2" tabindex="-1"></a>Continents</span></code></pre></div>
<pre><code>## [1] &quot;Africa&quot;        &quot;Asia&quot;          &quot;Europe&quot;        &quot;North America&quot;
## [5] &quot;Oceanea&quot;       &quot;South America&quot;</code></pre>
</div>
<div id="create-an-empty-vector-to-store-the-results" class="section level3 hasAnchor" number="11.3.3">
<h3><span class="header-section-number">11.3.3</span> Create an empty vector to store the results<a href="computing-using-loops.html#create-an-empty-vector-to-store-the-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here, we will create a single mean value for each continent. Hence we require a vector to store these numerical values, where position <code>[i]</code> of the vector corresponds to the continent defined at <code>Continents[i]</code> in our <code>Continents</code> vector. We specify an empty vector for this output storage as follows:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="computing-using-loops.html#cb138-1" tabindex="-1"></a>MeanScore <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(Continents))</span>
<span id="cb138-2"><a href="computing-using-loops.html#cb138-2" tabindex="-1"></a>MeanScore</span></code></pre></div>
<pre><code>## [1] 0 0 0 0 0 0</code></pre>
</div>
<div id="use-a-for-loop-to-run-the-code-block-multiple-times-1" class="section level3 hasAnchor" number="11.3.4">
<h3><span class="header-section-number">11.3.4</span> Use a <code>for</code> loop to run the code block multiple times<a href="computing-using-loops.html#use-a-for-loop-to-run-the-code-block-multiple-times-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The code to be repeated goes inside a for loop, with one element of the vector <code>MeanScore</code> filled each time. (We’ll repeat the commands to set up the variables at the start.)</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="computing-using-loops.html#cb140-1" tabindex="-1"></a>Continents <span class="ot">&lt;-</span> <span class="fu">unique</span>(maths<span class="sc">$</span>continent) <span class="sc">%&gt;%</span> <span class="fu">sort</span>()</span>
<span id="cb140-2"><a href="computing-using-loops.html#cb140-2" tabindex="-1"></a>MeanScore <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(Continents))</span>
<span id="cb140-3"><a href="computing-using-loops.html#cb140-3" tabindex="-1"></a></span>
<span id="cb140-4"><a href="computing-using-loops.html#cb140-4" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Continents)){</span>
<span id="cb140-5"><a href="computing-using-loops.html#cb140-5" tabindex="-1"></a>  Cont_data <span class="ot">&lt;-</span> maths <span class="sc">%&gt;%</span> <span class="fu">filter</span>(continent<span class="sc">==</span>Continents[i])</span>
<span id="cb140-6"><a href="computing-using-loops.html#cb140-6" tabindex="-1"></a>  MeanScore[i] <span class="ot">&lt;-</span> <span class="fu">mean</span>(Cont_data<span class="sc">$</span>score)</span>
<span id="cb140-7"><a href="computing-using-loops.html#cb140-7" tabindex="-1"></a>} </span>
<span id="cb140-8"><a href="computing-using-loops.html#cb140-8" tabindex="-1"></a><span class="fu">rm</span>(i, Cont_data)</span></code></pre></div>
</div>
<div id="convert-the-vector-to-a-data-frame" class="section level3 hasAnchor" number="11.3.5">
<h3><span class="header-section-number">11.3.5</span> Convert the vector to a data frame<a href="computing-using-loops.html#convert-the-vector-to-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For tidiness and clarity we now combine the resulting output vector of means with the continent names into a data frame (tibble) as follows:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="computing-using-loops.html#cb141-1" tabindex="-1"></a>ContMean <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">continent =</span> Continents, <span class="at">MeanScore =</span> MeanScore)</span>
<span id="cb141-2"><a href="computing-using-loops.html#cb141-2" tabindex="-1"></a>ContMean</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   continent     MeanScore
##   &lt;chr&gt;             &lt;dbl&gt;
## 1 Africa             364.
## 2 Asia               471.
## 3 Europe             476.
## 4 North America      423.
## 5 Oceanea            494.
## 6 South America      401.</code></pre>
<div class="rmdnote">
<p>
The task in this example is to compute a simple summary and the
result could be achieved more elegantly by chaining together the
<code>group_by()</code> and <code>summarise()</code> commands, as
explained in the <a href="summary-statistics---recap.html#computing-summaries-per-group">Computing summaries per group</a> section. When the
computations per group become more complex, the use of a
<code>for</code> loop becomes a more appropriate method.
</p>
</div>
</div>
</div>
<div id="exercise-3" class="section level2 hasAnchor" number="11.4">
<h2><span class="header-section-number">11.4</span> Exercise<a href="computing-using-loops.html#exercise-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="task">
<div class="exercise">
<p><span id="exr:unlabeled-div-6" class="exercise"><strong>Exercise 11.1  </strong></span>The data file <code>Monthly_Wind_MA_1980-95.csv</code> contains monthly mean wind speed measurements (m/sec) from a weather station near Manchester Airport over the period 1980 - 1995.</p>
<ol style="list-style-type: decimal">
<li><p>Read in the data and make a line plot of the monthly mean wind speed data over time. What do you notice about the data? [The <code>geom</code> command for a line plot is <code>geom_line()</code>; consider the scale of your x-axis here - you will need to create an appropriate variable for the time scale of the data.]</p></li>
<li><p>Using a <code>for</code> loop, compute the annual average mean wind speed for each year over the period of the data and store the result as a data frame with two columns: ‘Year’ and ‘Annual_Mean’.</p></li>
<li><p>Plot your calculated annual mean wind speed data as a second line plot. Comparing with your plot in part 1., what can you say about the effect of the averaging on the variability in the data?</p></li>
</ol>
</div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="maps-with-leaflet.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="relationships-in-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
